
<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Cradle PHP</title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        
        
        
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		
        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        
        <link rel="stylesheet" type="text/css" href="/bower_components/eve-font-awesome/awesome.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/eve-open-sans/open-sans.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/eve-bootstrap/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/eve-open-sans/open-sans.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />
        
        <script type="text/javascript" src="/bower_components/eve-jquery/jquery.js"></script>
        <script type="text/javascript" src="/bower_components/eve-bootstrap/bootstrap.js"></script>
    </head>

    <body>
    	<header>
        	<nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>
        
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="/docs/intro.html">Documentation</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>
        </header>
        <section class="body">
            <div class="container">
                
                <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
    <h5>Getting Started</h5>
    <ul>
        <li><a href="/docs/install.html">Install</a></li>
        <li><a href="/docs/intro.html">Introduction</a></li>
    </ul>

    <h5>Features</h5>
    <ul>
        <li><a href="/docs/bootstrap.html">Bootstrap</a></li>
        <li><a href="/docs/events.html">Events</a></li>
        <li><a href="/docs/flows.html">Flows</a></li>
        <li><a href="/docs/routing.html">Routing</a></li>
        <li><a href="/docs/middleware.html">Middleware</a></li>
        <li><a href="/docs/request.html">Request</a></li>
        <li><a href="/docs/response.html">Response</a></li>
        <li><a href="/docs/piping.html">Piping</a></li>
        <li><a href="/docs/integration.html">Integration</a></li>
        <li><a href="/docs/packages.html">Packages</a></li>
    </ul>
</div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Routing</h1>
            
            <ul>
            	<li><i class="fa fa-arrow-right"></i><a href="#basic">Basics</a></li>
            	<li><i class="fa fa-arrow-right"></i><a href="#methods">Request Methods</a></li>
            	<li><i class="fa fa-arrow-right"></i><a href="#paths">Request Paths</a></li>
            	<li><i class="fa fa-arrow-right"></i><a href="#handlers">Route Handlers</a></li>
            </ul>
        
        	<a name="basic"></a>
            <h2><i class="fa fa-arrow-down"></i> Basics</h2>
            
            <p>Routing is a subset of <a href="/docs/flows.html">flows</a> which is a 
            subset of <a href="/docs/events.html">events</a>. Routing wraps how event 
            listeners work and designed to resolve request methods and paths. The basic 
            route listener looks like the following.</p>
            
            <h6>Basic Routing</h6>
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get('Some Event', function($request, $response) {
	//Do something here
});

</code></pre>

			<p>Which is very similar to how the basic event listener looks like in retrospec. The two 
            main differences here are instead of using <code class="language-php">->on()</code>, 
            we are using something called <code class="language-php">->get()</code> and there are two
            predefined arguments called a <code class="language-php">$request</code> and a
            <code class="language-php">$response</code>. First let's take a look at what the 
            <code class="language-php">->get()</code> is exactly. </p>
            
        	<a name="methods"></a>
            <h2><i class="fa fa-arrow-down"></i> Request Methods</h2>
            
            <p>There are four common request methods 
            a website deals with and they are the following.</p>
			
            <h4>Common Request Methods</h4>
			<ul>
            	<li>GET</li>
            	<li>POST</li>
            	<li>PUT</li>
            	<li>DELETE</li>
            </ul>
            
            <p>When a page loads for example, that method is called <strong>GET</strong> and when you 
            submit a form the method is usually a <strong>POST</strong>. So what we need to take into 
            consideration are a request method and from what URL path the user is requesting that from. 
            The following shows how we can consider requests which are called routing methods.</p>
			
            <h6>A routing method</h6>
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->route('GET', '/some/path/', function($request, $response) {
	//Do something here
});

</code></pre>
            
            <p>This method has three arguments which combines thoughts of an event and thoughts of a 
            website request into one. The first argument is the request method. You are free to put any
            arbitrary name here, but the user will send up one of a fixed possibility which were 
            discussed above. The second argument in the <code class="language-php">->route()</code> method
            is called the request path. to simplify, this is the folder request a user makes 
            for example, if a user loaded 
            <code class="language-php">http://google.com/about</code>, 
            <code class="language-php">/about</code>
            would be the path name. The last argument just like events is called the route handler.</p>
            
            <p>When it comes to request methods, mentioned before, the routing object has predefined methods 
            that acknowledge this commonality. The following all of which wraps the 
            <code class="language-php">->route()</code> method for your convienience.</p>
            
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()
	->get('/some/path/', function($request, $response) {})
	->post('/some/path/', function($request, $response) {})
	->put('/some/path/', function($request, $response) {})
	->delete('/some/path/', function($request, $response) {});

</code></pre>

			<p>If you wanted listen to all request methods in one go you can do so like this.</p>
			
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->all('/some/path/', function($request, $response) {});

</code></pre>
            
        	<a name="paths"></a>
            <h2><i class="fa fa-arrow-down"></i> Request Paths</h2>
            
			<p>With paths, they can also be expressed with wildcards by adding 
            a <code class="language-php">*</code> as in the following.</p>
            
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get('/some/*/stuff', function($request, $response) {});

</code></pre> 
			
            <p>When the request path is <code class="language-php">/some/good/stuff</code>, the
            above handler will be called, like wise with <code class="language-php">/some/bad/stuff</code>, 
            however <code class="language-php">/some/stuff</code> will not fire the above handler.</p>
            
            <p>To take on an N amount of wildcards you can add <code class="language-php">*</code> 
            as in the following.</p>
            
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get('/some/**/stuff', function($request, $response) {});

</code></pre>

			<p>When the request path is <code class="language-php">/some/good/stuff</code>, the
            above handler will be called, like wise with <code class="language-php">/some/even/better/stuff</code>, 
            however <code class="language-php">/some/stuff</code> will not fire the above handler. 
            If you wanted a route handler to handle all requests that deal with all
            <code class="language-php">/article</code> requests for example, you can do so like this.</p>
            
            <pre class="code line-numbers language-php"><code>&lt;?php
cradle()->all('/article/**', function($request, $response) {});

</code></pre>
			
            <p>Or like this.</p>
            
			<pre class="code line-numbers language-php"><code>&lt;?php
cradle()->all('**', function($request, $response) {});

</code></pre>
            
            <div class="alert alert-warning"><i class="fa fa-exclamation-triangle"></i>
            This will call the handler on every request. You may not want that.
            </div>
            
            <a name="handlers"></a>
            <h2><i class="fa fa-arrow-down"></i> Route Handlers</h2>
            
            <p>Much like events, routing can be expressed as a function 
            or an include like the following.</p>
            
            <h6>Include Handlers</h6>
			<pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get('/some/path', include('/some/event/handler'));

</code></pre>

			<p>Much like flows, routing can also call on class methods 
            like the following.</p>
			
            <h6>Class Handlers</h6>
			<pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get('/some/path', 'Controller@action');

cradle()->get('/some/path', 'Controller::action');

</code></pre>

			<p>Routing adopts the flow interface which allows this to happen.</p>
			
            <h6>Handler Flows</h6>
			<pre class="code line-numbers language-php"><code>&lt;?php
cradle()->get(
	'/some/path', 
    'Another Event',
    include('/another/event.php'),
    'Controller@action',
    'Controller::action',
    ...$moreActions
);

</code></pre>

			<p>Where it differs is, by default, routing provides two arguments which are called a
            <code class="language-php">$request</code> and a 
            <code class="language-php">$response</code>. For consistency a 
            <code class="language-php">$request</code> and a 
            <code class="language-php">$response</code> should be passed whenever 
            you trigger an event within a route handler. Fo example, in
            <a href="/docs/flows.html#fork">flows</a>, we discussed forking, and with 
            routing the exact same applies, with the addition of passing the 
            <code class="language-php">$request</code> and 
            <code class="language-php">$response</code> first like the example below.</p>
            
			<pre class="code line-numbers language-php"><code>&lt;?php
return function($request, $response) {
	//Do Something here
    
    //Trigger a fork
    if($good) {
    	$this->trigger('A Good Event', $request, $response);
    } else {
    	$this->trigger('A Bad Event', $request, $response);
    }
};

</code></pre>
            
            <div class="alert alert-info"><i class="fa fa-info-circle"></i> 
            <code class="language-php">$request</code> followed by
            <code class="language-php">$response</code> should always be at 
            the start of your arguments for consistency with other packages.
            </div>
                  
        </div>
    </div>
</div>
            </div>
        </section>
        <footer>
        	<div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>
        
        <div class="middle pull-right">
            <ul>
                <li><a href="/docs/intro.html">Getting Started</a></li>
                <li><a href="/docs/install.html">Install</a></li>
                <li><a href="/">Documentation</a></li>
            </ul>
        </div>
    </div>
    <div class="masthead">
    	<center class="copy"><a href="https://travis-ci.org/CradlePHP/packages"><img src="https://camo.githubusercontent.com/3804e51a62488f1528ee033cf005e4f891c5ef9d/68747470733a2f2f7472617669732d63692e6f72672f437261646c655048502f7061636b616765732e7376673f6272616e63683d6d6173746572" alt="Travis CI" data-canonical-src="https://travis-ci.org/CradlePHP/packages.svg?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/github/CradlePHP/Cradle?branch=master"><img src="https://camo.githubusercontent.com/ca6eb51c7ba0a2ee71036c8821dfdcd121e2850a/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f437261646c655048502f437261646c652f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/CradlePHP/Cradle/badge.svg?branch=master" style="max-width:100%;"></a>
<a href="https://packagist.org/packages/cradlephp/packages"><img src="https://camo.githubusercontent.com/77dcea7de3d66f21e488b3fc511660144f5a96fd/68747470733a2f2f706f7365722e707567782e6f72672f637261646c657068702f7061636b616765732f762f737461626c65" alt="Latest Stable Version" data-canonical-src="https://poser.pugx.org/cradlephp/packages/v/stable" style="max-width:100%;"></a>
<a href="https://packagist.org/packages/cradlephp/packages"><img src="https://camo.githubusercontent.com/dd6ccd231e83b81f9df14b0bb28de3cf5540eb55/68747470733a2f2f706f7365722e707567782e6f72672f637261646c657068702f7061636b616765732f646f776e6c6f616473" alt="Total Downloads" data-canonical-src="https://poser.pugx.org/cradlephp/packages/downloads" style="max-width:100%;"></a>
<a href="https://packagist.org/packages/cradlephp/packages"><img src="https://camo.githubusercontent.com/121a7a7bd1d13a6f5ca167379e6c7052eaa16096/68747470733a2f2f706f7365722e707567782e6f72672f637261646c657068702f7061636b616765732f762f756e737461626c65" alt="Latest Unstable Version" data-canonical-src="https://poser.pugx.org/cradlephp/packages/v/unstable" style="max-width:100%;"></a>
<a href="https://packagist.org/packages/cradlephp/packages"><img src="https://camo.githubusercontent.com/ace5982b36be236c5c46915641448408b4ddf3d0/68747470733a2f2f706f7365722e707567782e6f72672f637261646c657068702f7061636b616765732f6c6963656e7365" alt="License" data-canonical-src="https://poser.pugx.org/cradlephp/packages/license" style="max-width:100%;"></a>
<br /><br />&copy; CradlePHP 2016</center>
    </div>
</div>
        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
