<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Integration - CradlePHP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        <meta name="description" content="Integration Semi-Integration Full Integration Semi Integration When it comes to PHP, there are already existing great enterprise s" />
        
        <meta name="keywords" content="php,framework,cradle,integration" />
        

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- FACEBOOK TAGS -->
        <meta property="og:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta property="og:title" content="Integration - CradlePHP" />

        <meta property="og:description" content="Integration Semi-Integration Full Integration Semi Integration When it comes to PHP, there are already existing great enterprise s" />

        <meta property="og:type" content="website" />

        <meta property="og:url" content="https://cradlephp.github.io/" />

        <!-- TWITTER TAGS -->
        <meta name="twitter:card" content="summary" />

        <meta name="twitter:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta name="twitter:title" content="Integration - CradlePHP" />

        <meta name="twitter:description" content="Integration Semi-Integration Full Integration Semi Integration When it comes to PHP, there are already existing great enterprise s" />

        <meta name="twitter:url" content="https://cradlephp.github.io/" />

        <!-- SCHEMA.ORG TAGS -->
        <meta itemprop="name" content="Cradle PHP" />
        <meta itemprop="openingHours" content="Mo,Tu,We,Th,Fr 10:00-20:00" />

        <link itemprop="url" content="https://cradlephp.github.io/" />
        <link itemprop="logo" content="https://cradlephp.github.io/www/images/logo-long.png" />
        <link itemprop="image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <link rel="stylesheet" type="text/css" href="/bower_components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/opensans-webfont-latin/css/opensans-latin.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>

    <body>
    	<header>
            <nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

        </header>

        <section class="body">
            <div class="container">
                
                 <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
            <h5>Getting Started</h5>
<ul>
    <li><a href="/docs/install.html">Install</a></li>
    <li><a href="/docs/introduction.html">Introduction</a></li>
    <li><a href="/docs/writing.html">Your First App</a></li>
</ul>

<h5>Concepts</h5>
<ul>
    <li><a href="/docs/events.html">Events</a></li>
    <li><a href="/docs/flows.html">Flows</a></li>
    <li><a href="/docs/routing.html">Routing</a></li>
    <li><a href="/docs/middleware.html">Middleware</a></li>
    <li><a href="/docs/request.html">Request</a></li>
    <li><a href="/docs/response.html">Response</a></li>
    <li><a href="/docs/integration.html">Integration</a></li>
    <li><a href="/docs/packages.html">Packages</a></li>
</ul>

<!--<h5>Core Traits</h5>
<ul>
    <li><a href="/docs/helper.html">Helper</a></li>
    <li><a href="/docs/data.html">Data</a></li>
    <li><a href="/docs/resolver.html">Resolver</a></li>
    <li><a href="/docs/profiler.html">Profiler</a></li>
</ul>-->

<!--<h5>Core Packages</h5>
<ul>
    <li><a href="/docs/curl.html">cURL</a></li>
    <li><a href="/docs/handlebars.html">Handlebars</a></li>
    <li><a href="/docs/image.html">Image</a></li>
    <li><a href="/docs/sql.html">SQL</a></li>
</ul>-->

<h5>Kitchen Sink</h5>
<ul>
    <li><a href="/docs/sink.html">Install</a></li>
    <li><a href="/docs/sink-overview.html">Overview</a></li>
    <li><a href="/docs/sink-bootstrap.html">Bootstrap</a></li>
    <li><a href="/docs/sink-module.html">Modules</a></li>
    <li><a href="/docs/sink-app.html">Applications</a></li>
    <li><a href="/docs/sink-schema.html">Schemas</a></li>
    <li><a href="/docs/sink-generators.html">Generators</a></li>
</ul>
<!--
    <li><a href="/docs/sink-cli.html">Custom CLI Commands</a></li>

    <li><a href="/docs/sink-auth.html">Authentication</a></li>
    <li><a href="/docs/sink-files.html">File Uploading</a></li>
    <li><a href="/docs/sink-mail.html">Sending Mail</a></li>
    <li><a href="/docs/sink-queue.html">Queuing Jobs</a></li>
    <li><a href="/docs/sink-optimization.html">Optimization</a></li>
    <li><a href="/docs/sink-security.html">Security Cases</a></li>
    <li><a href="/docs/sink-i18n.html">i18n</a></li>
</ul>-->
   
        </div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Integration</h1>
<ul>
<li><i class="fa fa-arrow-right"></i><a href="#semi">Semi-Integration</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#full">Full Integration</a></li>
</ul>
<p><a name="semi"></a></p>
<h2><i class="fa fa-arrow-down"></i> Semi Integration</h2>
<p>When it comes to PHP, there are already existing great enterprise solutions
out there. If you have done something existing in PHP already, most likely you
have used one of them. Cradle is a meta framework, and whenever your ready to
integrate with a more enterprise solution, you can easily so with the
<code class="language-php">-&gt;export()</code> method. The following example shows how this can be done.</p>
<h6>Exporting a Flow</h6>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
/**
 * Hello Laravel !
 */
$app-&gt;get('/', cradle()-&gt;export('Get Foo Bar'));

</code></pre>
<p>The above will return a callback which <a href="https://laravel.com/">Laravel</a> can
call on. In this particular case <a href="https://laravel.com/">Laravel</a> can pass an
<em>N</em> amount of arguments, all of which will be ignored by default and
Cradle will continue with its own way of doing things and in the end either
return a response string or false. If you want to map out the response before
it gets sent to <a href="https://laravel.com/">Laravel</a> you need to create a map
callback and add true to the <code class="language-php">-&gt;export()</code> method. The following shows how
this can be done.</p>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
/**
 * Hello Laravel !
 */
$app-&gt;get('/{app_id}', function($appId) {
    list($request, $response, $next) = cradle()-&gt;export('Get Foo Bar', true);

    $request-&gt;setPost('app_id', $appId);

    return $next();
});
</code></pre>
<p>Doing it this way will return three properties, <code class="language-php">$request</code> which is the
Cradle <a href="/docs/request.html">Request</a> object, <code class="language-php">$response</code> which is the Cradle
<a href="/docs/response.html">Response</a> object and <code class="language-php">$next</code> which is the callback to
trigger the flow. In <a href="https://symfony.com/">Symfony</a> you an achieve the same
in <a href="https://laravel.com/">Laravel</a> with the following.</p>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
// src/AppBundle/Controller/BlogController.php
namespace AppBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;

class BlogController extends Controller
{
    /**
     * Matches /blog/*
     *
     * @Route("/blog/{slug}", name="blog_show")
     */
    public function showAction($slug)
    {
        list($request, $response, $next) = cradle()-&gt;export('Get Foo Bar', true);

        $request-&gt;setPost('blog_slug', $slug);

        return new Response($next());
    }
}

</code></pre>
<p><a name="full"></a></p>
<h2><i class="fa fa-arrow-down"></i> Full Integration</h2>
<p>With full integration, we will not be utilizing Cradle's
<a href="/docs/request.html">Request</a>, <a href="/docs/response.html">Response</a>,
nor the <a href="/docs/routing.html">Router</a> to run these flows. Instead we rely on
the framework that we are integrating with to have these features. To do a
full on integration it's really three steps.</p>
<h3>Step 1</h3>
<p>Define all your flows in the configuration folder which is usually marked as
<code class="language-php">/config</code> or <code class="language-php">/app/config</code>. Your File should look like the following.</p>
<h6><code class="language-php">/config/flows.php</code></h6>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php

return array(
    array(
        'Form Submit',
        'Some Form Event',
        'Another Form Event',
        array(
            'A Good Form Event',
            'Controller@action',
        ),
        array(
            'A Bad Form Event',
            'Controller::action',
        )
    ),
    array(
        'Render Page',
        'Some Page Event',
        'Another Page Event',
    )
);
</code></pre>
<h3>Step 2</h3>
<p>Setup Cradle in the main PHP file. Most frameworks use <code class="language-php">/public/index.php</code>
or <code class="language-php">/web/app.php</code>. Open that file and add the following.</p>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php

if(!function_exists('cradle')) {
    function cradle()
    {
        static $framework = null;

        if(is_null($framework)) {
            $framework = new \Cradle\Frame\FrameHttp;
        }

        return $framework;
    }
}

</code></pre>
<h3>Step 3</h3>
<p>Populate the Framework Actions</p>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
// src/AppBundle/Controller/BlogController.php
namespace AppBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;

class BlogController extends Controller
{
    /**
     * Matches /blog/*
     *
     * @Route("/blog/{slug}", name="blog_show")
     */
    public function showAction($slug)
    {
        $response = new Response();

        cradle()-&gt;trigger('Render Page', $slug, $response);

        return $response;
    }
}
</code></pre>
        </div>

    </div>
</div>

            </div>
        </section>
        <footer>
            <div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>

        <div class="middle pull-right">
            <ul>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="/docs/introduction.html">Introduction</a></li>
                <li><a href="/docs/introduction.html">Documentation</a></li>
            </ul>
        </div>


    </div>
    <div class="masthead">
    	<center class="copy">
            <a href="https://travis-ci.org/CradlePHP/framework"><img src="https://travis-ci.org/CradlePHP/framework.svg?branch=master" alt="Travis CI" style="max-width:100%;"></a>
            <a href='https://coveralls.io/github/CradlePHP/framework?branch=master'><img src='https://coveralls.io/repos/github/CradlePHP/framework/badge.svg?branch=master' alt='Coverage Status' /></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img src="https://poser.pugx.org/cradlephp/framework/v/stable" alt="Latest Stable Version"  style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Total Downloads" src="https://poser.pugx.org/cradlephp/framework/downloads" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Latest Unstable Version" src="https://poser.pugx.org/cradlephp/framework/v/unstable" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="License" src="https://poser.pugx.org/cradlephp/framework/license" style="max-width:100%;"></a>
            <br /><br />&copy; CradlePHP 2016
        </center>
    </div>
</div>

        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
