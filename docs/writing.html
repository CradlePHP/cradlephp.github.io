<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Writing - CradlePHP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        <meta name="description" content="Writing Your First App In this tutorial, we will be creating a quick TODO list. For the sake of simplicity, we will be storing dat" />
        
        <meta name="keywords" content="php,framework,cradle,writing" />
        

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- FACEBOOK TAGS -->
        <meta property="og:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta property="og:title" content="Writing - CradlePHP" />

        <meta property="og:description" content="Writing Your First App In this tutorial, we will be creating a quick TODO list. For the sake of simplicity, we will be storing dat" />

        <meta property="og:type" content="website" />

        <meta property="og:url" content="https://cradlephp.github.io/" />

        <!-- TWITTER TAGS -->
        <meta name="twitter:card" content="summary" />

        <meta name="twitter:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta name="twitter:title" content="Writing - CradlePHP" />

        <meta name="twitter:description" content="Writing Your First App In this tutorial, we will be creating a quick TODO list. For the sake of simplicity, we will be storing dat" />

        <meta name="twitter:url" content="https://cradlephp.github.io/" />

        <!-- SCHEMA.ORG TAGS -->
        <meta itemprop="name" content="Cradle PHP" />
        <meta itemprop="openingHours" content="Mo,Tu,We,Th,Fr 10:00-20:00" />

        <link itemprop="url" content="https://cradlephp.github.io/" />
        <link itemprop="logo" content="https://cradlephp.github.io/www/images/logo-long.png" />
        <link itemprop="image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <link rel="stylesheet" type="text/css" href="/bower_components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/opensans-webfont-latin/css/opensans-latin.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>

    <body>
    	<header>
            <nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

        </header>

        <section class="body">
            <div class="container">
                
                 <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
            <h5>Getting Started</h5>
<ul>
    <li><a href="/docs/install.html">Install</a></li>
    <li><a href="/docs/introduction.html">Introduction</a></li>
    <li><a href="/docs/writing.html">Your First App</a></li>
</ul>

<h5>Concepts</h5>
<ul>
    <li><a href="/docs/events.html">Events</a></li>
    <li><a href="/docs/flows.html">Flows</a></li>
    <li><a href="/docs/routing.html">Routing</a></li>
    <li><a href="/docs/middleware.html">Middleware</a></li>
    <li><a href="/docs/request.html">Request</a></li>
    <li><a href="/docs/response.html">Response</a></li>
    <li><a href="/docs/integration.html">Integration</a></li>
    <li><a href="/docs/packages.html">Packages</a></li>
</ul>

<!--<h5>Core Traits</h5>
<ul>
    <li><a href="/docs/helper.html">Helper</a></li>
    <li><a href="/docs/data.html">Data</a></li>
    <li><a href="/docs/resolver.html">Resolver</a></li>
    <li><a href="/docs/profiler.html">Profiler</a></li>
</ul>-->

<!--<h5>Core Packages</h5>
<ul>
    <li><a href="/docs/curl.html">cURL</a></li>
    <li><a href="/docs/handlebars.html">Handlebars</a></li>
    <li><a href="/docs/image.html">Image</a></li>
    <li><a href="/docs/sql.html">SQL</a></li>
</ul>-->

<h5>Kitchen Sink</h5>
<ul>
    <li><a href="/docs/sink.html">Install</a></li>
    <li><a href="/docs/sink-overview.html">Overview</a></li>
    <li><a href="/docs/sink-bootstrap.html">Bootstrap</a></li>
    <li><a href="/docs/sink-module.html">Modules</a></li>
    <li><a href="/docs/sink-app.html">Applications</a></li>
    <li><a href="/docs/sink-schema.html">Schemas</a></li>
    <li><a href="/docs/sink-generators.html">Generators</a></li>
</ul>
<!--
    <li><a href="/docs/sink-cli.html">Custom CLI Commands</a></li>

    <li><a href="/docs/sink-auth.html">Authentication</a></li>
    <li><a href="/docs/sink-files.html">File Uploading</a></li>
    <li><a href="/docs/sink-mail.html">Sending Mail</a></li>
    <li><a href="/docs/sink-queue.html">Queuing Jobs</a></li>
    <li><a href="/docs/sink-optimization.html">Optimization</a></li>
    <li><a href="/docs/sink-security.html">Security Cases</a></li>
    <li><a href="/docs/sink-i18n.html">i18n</a></li>
</ul>-->
   
        </div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Writing Your First App</h1>
<p>In this tutorial, we will be creating a quick TODO list. For the sake of simplicity,
we will be storing data in <code class="language-php">$_SESSION</code> and using <a href="http://handlebarsjs.com">Handlebars</a>
for the templating engine.</p>
<p>First open up <code class="language-php">public/index.php</code> and add the following routes before the <code class="language-php">-&gt;render()</code> line.</p>
<h6><code class="language-php">public/index.php</code></h6>
<pre class="code line-numbers language-php"><code class="marked">
    -&gt;get('/todo', function ($request, $response) {
        //TODO
    })

    -&gt;post('/todo/create', function ($request, $response) {
        //TODO
    })

    -&gt;get('/todo/remove/:id', function ($request, $response) {
        //TODO
    })

</code></pre>
<p>What we did here is outline the routes we will be eventually populating. Next,
lets create a new file called <code class="language-php">template.html</code> in the <code class="language-php">public</code> folder and
populate the file with the following content.</p>
<h6><code class="language-php">public/template.html</code></h6>
<pre class="code line-numbers language-php"><code class="marked">
&lt;h1&gt;TODO&lt;/h1&gt;
&lt;form method="post" action="/todo/create"&gt;
    &lt;input type="text" name="detail" /&gt;
    &lt;button&gt;Create&lt;/button&gt;
&lt;/form&gt;
{{#if rows}}
&lt;table width="100%" border="1" cellpadding="5" cellspacing="0"&gt;
    {{#each rows}}
    &lt;tr&gt;
        &lt;td&gt;{{detail}}&lt;/td&gt;
        &lt;td&gt;&lt;a href="/todo/remove/{{@key}}"&gt;Remove&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    {{/each}}
&lt;/table&gt;
{{else}}
&lt;h4&gt;Nothing TODO, that might be a good thing :)&lt;/h4&gt;
{{/if}}

</code></pre>
<p>If you are unfamiliar with Handlebars, documentation can be found
<a href="http://handlebarsjs.com">here</a>. Now that we have a basic template, we can
continue to populate the routes. Let's first populate the <code class="language-php">GET /todo</code> route.
Paste the following within the <code class="language-php">-&gt;get('/todo')</code> callback.</p>
<h6><code class="language-php">public/index.php</code></h6>
<pre class="code line-numbers language-php"><code class="marked">    -&gt;get('/todo', function ($request, $response) {
        $rows = [];
        if($request-&gt;hasSession('todo')) {
            $rows = $request-&gt;getSession('todo');
        }

        $response-&gt;setResults('rows', $rows);
        $data = $response-&gt;getResults();

        $content = file_get_contents(__DIR__ . '/template.html');
        $handlebars = new Cradle\Handlebars\HandlebarsHandler();
        $template = $handlebars-&gt;compile($content);
        $response-&gt;setContent($template($data));
    })
</code></pre>
<p>You can now go to <code class="language-php">127.0.0.1:8888/todo</code> in your browser to see your first form
and list. This is great, but let's make the form and list dynamically work.</p>
<p>Next, let's populate the <code class="language-php">POST /todo/create</code> route. Paste the following within the
<code class="language-php">-&gt;post('/todo/create')</code> callback.</p>
<h6><code class="language-php">public/index.php</code></h6>
<pre class="code line-numbers language-php"><code class="marked">
    -&gt;post('/todo/create', function ($request, $response) {
        $detail = $request-&gt;getStage('detail');

        if($detail) {
            $rows = [];
            if($request-&gt;hasSession('todo')) {
                $rows = $request-&gt;getSession('todo');
            }

            $rows[] = ['detail' =&gt; $detail];
            $request-&gt;setSession('todo', $rows);
        }

        $this-&gt;triggerRoute('get', '/todo', $request, $response);
    })

</code></pre>
<p>Lastly, let's populate the <code class="language-php">GET /todo/remove/:id</code> route. Paste the following within the
<code class="language-php">-&gt;get('/todo/remove/:id')</code> callback.</p>
<h6><code class="language-php">public/index.php</code></h6>
<pre class="code line-numbers language-php"><code class="marked">
    -&gt;get('/todo/remove/:id', function ($request, $response) {
        $id = $request-&gt;getStage('id');
        if($request-&gt;hasSession('todo')) {
            $rows = $request-&gt;getSession('todo');

            if(isset($rows[$id])) {
                unset($rows[$id]);
            }

            $request-&gt;setSession('todo', $rows);
        }

        $this-&gt;triggerRoute('get', '/todo', $request, $response);
    })

</code></pre>
<p>Finally return to <code class="language-php">127.0.0.1:8888/todo</code> in your browser to double check the form
and list are working.</p>
        </div>

    </div>
</div>

            </div>
        </section>
        <footer>
            <div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>

        <div class="middle pull-right">
            <ul>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="/docs/introduction.html">Introduction</a></li>
                <li><a href="/docs/introduction.html">Documentation</a></li>
            </ul>
        </div>


    </div>
    <div class="masthead">
    	<center class="copy">
            <a href="https://travis-ci.org/CradlePHP/framework"><img src="https://travis-ci.org/CradlePHP/framework.svg?branch=master" alt="Travis CI" style="max-width:100%;"></a>
            <a href='https://coveralls.io/github/CradlePHP/framework?branch=master'><img src='https://coveralls.io/repos/github/CradlePHP/framework/badge.svg?branch=master' alt='Coverage Status' /></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img src="https://poser.pugx.org/cradlephp/framework/v/stable" alt="Latest Stable Version"  style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Total Downloads" src="https://poser.pugx.org/cradlephp/framework/downloads" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Latest Unstable Version" src="https://poser.pugx.org/cradlephp/framework/v/unstable" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="License" src="https://poser.pugx.org/cradlephp/framework/license" style="max-width:100%;"></a>
            <br /><br />&copy; CradlePHP 2016
        </center>
    </div>
</div>

        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
