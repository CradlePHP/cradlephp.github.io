<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Introduction - CradlePHP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        <meta name="description" content="Introduction Why ? tl;dr Why ? Cradle is a simple micro framework built on the latest PHP 7. Its main feature is simplicity, desig" />
        
        <meta name="keywords" content="php,framework,cradle,introduction" />
        

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- FACEBOOK TAGS -->
        <meta property="og:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta property="og:title" content="Introduction - CradlePHP" />

        <meta property="og:description" content="Introduction Why ? tl;dr Why ? Cradle is a simple micro framework built on the latest PHP 7. Its main feature is simplicity, desig" />

        <meta property="og:type" content="website" />

        <meta property="og:url" content="https://cradlephp.github.io/" />

        <!-- TWITTER TAGS -->
        <meta name="twitter:card" content="summary" />

        <meta name="twitter:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta name="twitter:title" content="Introduction - CradlePHP" />

        <meta name="twitter:description" content="Introduction Why ? tl;dr Why ? Cradle is a simple micro framework built on the latest PHP 7. Its main feature is simplicity, desig" />

        <meta name="twitter:url" content="https://cradlephp.github.io/" />

        <!-- SCHEMA.ORG TAGS -->
        <meta itemprop="name" content="Cradle PHP" />
        <meta itemprop="openingHours" content="Mo,Tu,We,Th,Fr 10:00-20:00" />

        <link itemprop="url" content="https://cradlephp.github.io/" />
        <link itemprop="logo" content="https://cradlephp.github.io/www/images/logo-long.png" />
        <link itemprop="image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <link rel="stylesheet" type="text/css" href="/bower_components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/opensans-webfont-latin/css/opensans-latin.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>

    <body>
    	<header>
            <nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

        </header>

        <section class="body">
            <div class="container">
                
                 <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
            <h5>Getting Started</h5>
<ul>
    <li><a href="/docs/install.html">Install</a></li>
    <li><a href="/docs/introduction.html">Introduction</a></li>
    <li><a href="/docs/sink.html">Kitchen Sink</a></li>
</ul>

<h5>Concepts</h5>
<ul>
    <li><a href="/docs/events.html">Events</a></li>
    <li><a href="/docs/flows.html">Flows</a></li>
    <li><a href="/docs/routing.html">Routing</a></li>
    <li><a href="/docs/middleware.html">Middleware</a></li>
    <li><a href="/docs/request.html">Request</a></li>
    <li><a href="/docs/response.html">Response</a></li>
    <li><a href="/docs/integration.html">Integration</a></li>
    <li><a href="/docs/packages.html">Packages</a></li>
</ul>

<h5>Core Traits</h5>
<ul>
    <li><a href="/docs/helper.html">Helper</a></li>
    <li><a href="/docs/data.html">Data</a></li>
    <li><a href="/docs/resolver.html">Resolver</a></li>
    <li><a href="/docs/profiler.html">Profiler</a></li>
</ul>

<!--<h5>Core Packages</h5>
<ul>
    <li><a href="/docs/curl.html">cURL</a></li>
    <li><a href="/docs/handlebars.html">Handlebars</a></li>
    <li><a href="/docs/image.html">Image</a></li>
    <li><a href="/docs/sql.html">SQL</a></li>
</ul>-->

<h5>Kitchen Sink</h5>
<ul>
    <li><a href="/docs/sink-bootstrap.html">Bootstrap</a></li>
    <li><a href="/docs/sink-models.html">Models</a></li>
    <li><a href="/docs/sink-jobs.html">Jobs</a></li>
    <li><a href="/docs/sink-controllers.html">Controllers</a></li>
    <li><a href="/docs/sink-templates.html">Templates</a></li>
</ul>
<!--
    <li><a href="/docs/sink-overview.html">Overview</a></li>
    <li><a href="/docs/sink-cli.html">Custom CLI Commands</a></li>

    <li><a href="/docs/sink-auth.html">Authentication</a></li>
    <li><a href="/docs/sink-files.html">File Uploading</a></li>
    <li><a href="/docs/sink-mail.html">Sending Mail</a></li>
    <li><a href="/docs/sink-queue.html">Queuing Jobs</a></li>
    <li><a href="/docs/sink-optimization.html">Optimization</a></li>
    <li><a href="/docs/sink-security.html">Security Cases</a></li>
    <li><a href="/docs/sink-i18n.html">i18n</a></li>
</ul>-->
   
        </div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Introduction</h1>
<ul>
<li><i class="fa fa-arrow-right"></i><a href="#why">Why ?</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#tldr">tl;dr</a></li>
</ul>
<p><a name="why"></a></p>
<h2><i class="fa fa-arrow-down"></i> Why ?</h2>
<p>Cradle is a simple micro framework built on the latest PHP 7. Its main
feature is simplicity, designed for collaborating with other technologies in
your stack. Most PHP frameworks are built with a lot in mind, making developing
complex PHP centric apps much easier, assuming that PHP is the center of
everyone's world.</p>
<p>Modern applications these days, however usually do not rely on the LAMP/LEMP
stack alone. They use services for caching, indexing, file storage, push
messages, queuing, streams etc. They also use several different languages like
Python, Java, Node JS, R, Scala for all kinds of things. A good portion of apps
center around client side with React, Angular and mobile devices. With the
learning curve, configuration and extra weight that comes with a full
stack PHP framework, it's very impractical to use them for simple jobs.</p>
<h3>Unopinionated</h3>
<p>Cradle does not require any particular data store or template engine. There
is no defined file structure, no required dependencies and is not specific
to building web applications. There are no required dependencies, it does
not require you to write classes and features are minimized to manage overhead.</p>
<p><a name="tldr"></a></p>
<h2><i class="fa fa-arrow-down"></i> tl;dr</h2>
<p>To help explain this simple approach in summary, the following briefly
describes the core features of Cradle.</p>
<ul>
<li><i class="fa fa-arrow-right"></i><a href="#events">Events</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#request">Request</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#response">Response</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#routing">Routing</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#middleware">Middleware</a></li>
</ul>
<p>A further tl;dr can be expressed by installing the <a href="/docs/sink.html">Kitchen Sink</a></p>
<p><a name="events"></a></p>
<h2><i class="fa fa-arrow-down"></i> Events</h2>
<p>Events can be formed like the following example where <code class="language-php">create-user</code> and
<code class="language-php">$data</code> are arbitrary.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;on('create-user', function(...$data) {
    //insert to database
});

</code></pre>
<p>Triggering events can be achieved with the following example where 'create-user'
is the name of the event to execute, <code class="language-php">foo</code> and <code class="language-php">bar</code> will be passed to <code class="language-php">$data</code>
from the example above.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;trigger('create-user', 'foo', 'bar');

</code></pre>
<p>Events can also be called from the command line like the following example.</p>
<pre class="code line-numbers language-php"><code class="marked">
$ vendor/bin/cradle update-user name="John Doe" --age 45

</code></pre>
<p>The following code could receive and process this command where <code class="language-php">$req</code> is
a <code class="language-php">Cradle\Http\Request</code> object and <code class="language-php">$res</code> is a <code class="language-php">Cradle\Http\Response</code>
object.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;on('update-user', function($req, $res) {
    $name = $req-&gt;getStage('name');
    $age = $req-&gt;getStage('age');
    $res-&gt;setContent('Hello, ' . $name);
});

</code></pre>
<p>More information in depth can be found <a href="/docs/events.html">here</a>.</p>
<p><a name="request"></a></p>
<h2><i class="fa fa-arrow-down"></i> Request</h2>
<p>Request objects are used whenever a consumers uses your application via command
line or http request. Request objects provide many useful methods like the
following.</p>
<pre class="code line-numbers language-php"><code class="marked">
$req-&gt;getPost('foo');
$req-&gt;getServer('REQUEST_URI');
$req-&gt;getCookies('name');
$req-&gt;getSession('name');
$req-&gt;getFiles();

</code></pre>
<p>Request, can be accessed like an array because it implements ArrayAccess and
when outputted will output as a JSON hash will look like the following.</p>
<pre class="code line-numbers language-php"><code class="marked">
{
    "args": null,
    "body": "",
    "cookie": {},
    "files": {},
    "get": {
        "baz": "zoo"
    },
    "post": {
        "foo": "bar"
    },
    "stage": {
        "baz": "zoo",
        "foo": "bar"
    },
    "session": {},
    "server": {
        "HTTP_HOST": "cradle.dev",
        "REQUEST_METHOD": "POST",
        "REQUEST_URI": "\/docs\/introduction.html?baz=zoo",
        ...
    },
    "path": {
        "string": "\/docs\/introduction.html",
        "array": [
            "",
            "docs",
            "introduction.html"
        ]
    },
    "method": "POST",
    "query": "baz=zoo",
    "route": {
        "method": "post",
        "path": "\/docs\/*",
        "variables": [
            "introduction.html"
        ]
    }
}

</code></pre>
<h3>Stage</h3>
<p>Request comes with aggregated data from the <code class="language-php">post</code>, <code class="language-php">get</code> and url variables
found in <code class="language-php">stage</code>. To access stage data you can use <code class="language-php">$req-&gt;getStage('foo')</code> to
get the value of <code class="language-php">foo</code> or get the entire staged data with <code class="language-php">$req-&gt;getStage()</code>.
Manipulating the stage likewise can be done like this <code class="language-php">$req-&gt;setStage('foo', 'bar')</code>.
In practice we manipulate stage data in preparation of a write process like
inserting into a database.</p>
<p>More information about requests in depth can be found <a href="/docs/request.html">here</a>.</p>
<p><a name="response"></a></p>
<h2><i class="fa fa-arrow-down"></i> Response</h2>
<p>Response objects are used as a format for parsing data to be returned back to
a consumer via command line or HTTP. Response objects have similar
traits to Request and likewise provide many useful methods like the following.</p>
<pre class="code line-numbers language-php"><code class="marked">
$res-&gt;getResults(...$args);

$res-&gt;setResults(...$args, $value);

$res-&gt;setError(true, $message);

$res-&gt;addHeader('Content-Type', 'text/plain');

$res-&gt;setContent('Hello, World');

</code></pre>
<p>Response, can be accessed like an array because it implements ArrayAccess and
when outputted will output as a JSON hash will look like the following.</p>
<pre class="code line-numbers language-php"><code class="marked">
{
    "headers": {
        "Content-Type": "text\/plain"
    },
    "code": 200,
    "header": {
        "Status": "200 OK",
    },
    "json": {
        "error": false,
        "results": {
            "menu": {
                "#registry": "Registry",
                "#methods": "Response Methods",
            }
        }
    },
    "content": "Hello, World"
}

</code></pre>
<h3>JSON and Content</h3>
<p>When there is no content set in your response by default the JSON data is
outputted. Otherwise, we use <code class="language-php">results</code> found in <code class="language-php">json</code> for binding with
template engines.</p>
<p>More information about responses in depth can be found <a href="/docs/response.html">here</a>.</p>
<p><a name="routing"></a></p>
<h2><i class="fa fa-arrow-down"></i> Routing</h2>
<p>Routes can be formed like the following example where <code class="language-php">/create/user</code> is arbitrary.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;get('/create/user', function($req, $res) {
    //show a form
});

cradle()-&gt;post('/create/user', function($req, $res) {
    //insert into database
});

</code></pre>
<p>As well as <code class="language-php">get</code> and <code class="language-php">post</code> in the above example there are three more ease of use
methods called <code class="language-php">put</code>, <code class="language-php">delete</code> and <code class="language-php">all</code>. Custom methods can be dealt with in this
manner.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;route('OPTIONS', '/create/user', function($req, $res) {
    //Allow CORS
});

</code></pre>
<p>To enable routes you simply call <code class="language-php">cradle()-&gt;render()</code> after all your route
definitions. More information about routing in depth can be found
<a href="/docs/response.html">here</a>.</p>
<p><a name="middleware"></a></p>
<h2><i class="fa fa-arrow-down"></i> Middleware</h2>
<p><code class="language-php">cradle()-&gt;render()</code> actually does four steps.</p>
<ul>
<li>call all pre-processors</li>
<li>executes callbacks matching the routing with the actual request</li>
<li>call all post-processors</li>
<li>outputs results</li>
</ul>
<p>Pre-processors and post-processors can be defined in the following manner.</p>
<pre class="code line-numbers language-php"><code class="marked">
cradle()-&gt;preprocess(function ($req, $res) {
    //do something before routing
});

cradle()-&gt;postprocess(function ($req, $res) {
    //do something after routing
});

</code></pre>
<p>Post-processors when going through the normal <code class="language-php">render</code> method, are executed
after the response has been sent out to the user and the connection is closed.
The only caveat to post-processors is that sessions as in <code class="language-php">$_SESSION</code> can no
longer be written to.</p>
<p>Pre-processors can be executed exclusively by using the following code
<code class="language-php">cradle()-&gt;prepare()</code>. Likewise post-processors can be called like this
<code class="language-php">cradle()-&gt;shutdown()</code>.</p>
<h4>Errors</h4>
<p>When going through the normal <code class="language-php">render</code> method, errors are handled with the
following construct.</p>
<pre class="code line-numbers language-php"><code class="marked">cradle()-&gt;error(function($req, $res, $err) {
    //handle this error
});
</code></pre>
<p>The third argument in the above example passes the <code class="language-php">Throwable $err</code> object
when it applies. When an error is thrown, the response code would be changed
to either 500 or 404. Errors are also triggered when we did not match a route
to an actual request.</p>
<p>More information about middleware in depth can be found
<a href="/docs/middleware.html">here</a>.</p>
        </div>

    </div>
</div>

            </div>
        </section>
        <footer>
            <div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>

        <div class="middle pull-right">
            <ul>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="/docs/introduction.html">Introduction</a></li>
                <li><a href="/docs/introduction.html">Documentation</a></li>
            </ul>
        </div>


    </div>
    <div class="masthead">
    	<center class="copy">
            <a href="https://travis-ci.org/CradlePHP/framework"><img src="https://travis-ci.org/CradlePHP/framework.svg?branch=master" alt="Travis CI" style="max-width:100%;"></a>
            <a href='https://coveralls.io/github/CradlePHP/framework?branch=master'><img src='https://coveralls.io/repos/github/CradlePHP/framework/badge.svg?branch=master' alt='Coverage Status' /></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img src="https://poser.pugx.org/cradlephp/framework/v/stable" alt="Latest Stable Version"  style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Total Downloads" src="https://poser.pugx.org/cradlephp/framework/downloads" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Latest Unstable Version" src="https://poser.pugx.org/cradlephp/framework/v/unstable" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="License" src="https://poser.pugx.org/cradlephp/framework/license" style="max-width:100%;"></a>
            <br /><br />&copy; CradlePHP 2016
        </center>
    </div>
</div>

        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
