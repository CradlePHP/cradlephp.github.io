<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Piping - CradlePHP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        <meta name="description" content="Piping Rules of Etiquette With all of the concepts so far with events, flows, routing, middleware, requests and responses we can c" />
        
        <meta name="keywords" content="php,framework,cradle,piping" />
        

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- FACEBOOK TAGS -->
        <meta property="og:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta property="og:title" content="Piping - CradlePHP" />

        <meta property="og:description" content="Piping Rules of Etiquette With all of the concepts so far with events, flows, routing, middleware, requests and responses we can c" />

        <meta property="og:type" content="website" />

        <meta property="og:url" content="https://cradlephp.github.io/" />

        <!-- TWITTER TAGS -->
        <meta name="twitter:card" content="summary" />

        <meta name="twitter:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta name="twitter:title" content="Piping - CradlePHP" />

        <meta name="twitter:description" content="Piping Rules of Etiquette With all of the concepts so far with events, flows, routing, middleware, requests and responses we can c" />

        <meta name="twitter:url" content="https://cradlephp.github.io/" />

        <!-- SCHEMA.ORG TAGS -->
        <meta itemprop="name" content="Cradle PHP" />
        <meta itemprop="openingHours" content="Mo,Tu,We,Th,Fr 10:00-20:00" />

        <link itemprop="url" content="https://cradlephp.github.io/" />
        <link itemprop="logo" content="https://cradlephp.github.io/www/images/logo-long.png" />
        <link itemprop="image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <link rel="stylesheet" type="text/css" href="/bower_components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/opensans-webfont-latin/css/opensans-latin.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>

    <body>
    	<header>
            <nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

        </header>

        <section class="body">
            <div class="container">
                
                 <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
            <h5>Getting Started</h5>
<ul>
    <li><a href="/docs/install.html">Install</a></li>
    <li><a href="/docs/sink.html">Kitchen Sink</a></li>
    <li><a href="/docs/bootstrap.html">Bootstrap</a></li>
</ul>

<h5>Concepts</h5>
<ul>
    <li><a href="/docs/events.html">Events</a></li>
    <li><a href="/docs/flows.html">Flows</a></li>
    <li><a href="/docs/routing.html">Routing</a></li>
    <li><a href="/docs/middleware.html">Middleware</a></li>
    <li><a href="/docs/request.html">Request</a></li>
    <li><a href="/docs/response.html">Response</a></li>
    <li><a href="/docs/piping.html">Piping</a></li>
</ul>

<h5>Exporting</h5>
<ul>
    <li><a href="/docs/integration.html">Integration</a></li>
    <li><a href="/docs/packages.html">Packages</a></li>
</ul>

<!--<h5>Kitchen Sink</h5>
<ul>
    <li><a href="/docs/sink-intro.html">Introduction</a></li>
    <li><a href="/docs/sink-schema.html">Schema</a></li>
    <li><a href="/docs/sink-auth.html">Authentication</a></li>
    <li><a href="/docs/sink-file.html">Files</a></li>
    <li><a href="/docs/sink-mail.html">Mail</a></li>
    <li><a href="/docs/sink-queue.html">Queue</a></li>
    <li><a href="/docs/sink-csrf.html">CSRF</a></li>
    <li><a href="/docs/sink-captcha.html">Captcha</a></li>
    <li><a href="/docs/sink-handlebars.html">Handlebars</a></li>
</ul>

<h5>Core Traits</h5>
<ul>
    <li><a href="/docs/helper.html">Helper</a></li>
    <li><a href="/docs/data.html">Data</a></li>
    <li><a href="/docs/resolver.html">Resolver</a></li>
    <li><a href="/docs/profiler.html">Profiler</a></li>
</ul>

<h5>Core Packages</h5>
<ul>
    <li><a href="/docs/i18n.html">i18n</a></li>
    <li><a href="/docs/image.html">Image</a></li>
    <li><a href="/docs/curl.html">cURL</a></li>
    <li><a href="/docs/sql.html">SQL</a></li>
    <li><a href="/docs/handlebars.html">Handlebars</a></li>
</ul>-->
   
        </div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Piping Rules of Etiquette</h1>
<p>With all of the concepts so far with <a href="/docs/events/html">events</a>,
<a href="/docs/flows.html">flows</a>, <a href="/docs/routing.html">routing</a>,
<a href="/docs/middleware">middleware</a>, <a href="/docs/request.html">requests</a> and
<a href="/docs/response.html">responses</a> we can create a new methodology called
<strong>Event Pipes</strong>. This concept deals with passing the <code class="language-php">$request</code> and
<code class="language-php">$response</code> to each handler till all handlers had a chance to deal with it.
At the end, The HTTP Handler will decide how to output it based on the final
response. Piping works out because you choose the events that should fire
off versus a random piece of code, which is how most implement events.</p>
<p>In summary, each handler just uses the <code class="language-php">$request</code> object and incrementally
populates the <code class="language-php">$response</code> object. This implies a rule of etiquette that each
handler should follow.</p>
<ol>
<li>Data to be processed should exist in <code class="language-php">$request['stage']</code>. This property is similar to <code class="language-php">$_REQUEST</code>, in that the <code class="language-php">$_GET</code>, <code class="language-php">$_POST</code> and <em>binded URL parameters</em> are already populated respectively in that order.</li>
<li>The above implies that a step should not process any data to be saved unless it is in the <code class="language-php">$request['stage']</code>.</li>
<li>Results are pushed to <code class="language-php">$response['json']</code> in array form.  Steps that populate the JSON should populate it using the following format below.</li>
<li>Steps that populate <code class="language-php">$response['json']</code> should soft push in order for other steps to further add on to the results.</li>
<li>When the data is ready to be transformed to a readable string output, then that content should be set in <code class="language-php">$response['body']</code>.</li>
</ol>
<h6>Rule 3: JSON Format</h6>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
[
    'error' =&gt; false,
    'message' =&gt; 'A message',
    'validation' =&gt; [
        'post_title' =&gt; 'Cannot be empty'
    ],
    'results' =&gt; [
        'post_title' =&gt; 'A Title named Foo Bar'
    ]
]

</code></pre>
        </div>

    </div>
</div>

            </div>
        </section>
        <footer>
            <div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>

        <div class="middle pull-right">
            <ul>
                <li><a href="https://cradlepphp.github.io/docs/intro.html">Getting Started</a></li>
                <li><a href="https://cradlepphp.github.io/docs/install.html">Install</a></li>
                <li><a href="https://cradlepphp.github.io/docs/intro.html">Documentation</a></li>
            </ul>
        </div>


    </div>
    <div class="masthead">
    	<center class="copy"><a href="https://travis-ci.org/CradlePHP/packages"><img src="https://travis-ci.org/CradlePHP/packages.svg?branch=master" alt="Travis CI" style="max-width:100%;"></a>
            <a href='https://coveralls.io/github/CradlePHP/packages?branch=master'><img src='https://coveralls.io/repos/github/CradlePHP/packages/badge.svg?branch=master' alt='Coverage Status' /></a>
            <a href="https://packagist.org/packages/cradlephp/packages"><img src="https://poser.pugx.org/cradlephp/packages/v/stable" alt="Latest Stable Version"  style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/packages"><img alt="Total Downloads" src="https://poser.pugx.org/cradlephp/packages/downloads" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/packages"><img alt="Latest Unstable Version" src="https://poser.pugx.org/cradlephp/packages/v/unstable" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/packages"><img alt="License" src="https://poser.pugx.org/cradlephp/packages/license" style="max-width:100%;"></a>
            <br /><br />&copy; CradlePHP 2016
        </center>
    </div>
</div>

        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
