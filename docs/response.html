<!DOCTYPE html>
<html lang="en" class="branding ">
    <head>
        <meta charset="utf-8" />
        <title>Response - CradlePHP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        
        <meta name="description" content="Response Registry Response Methods API (1) ContentTrait (3) HeaderTrait (3) PageTrait (9) RestTrait (15) StatusTrait (2) Registry " />
        
        <meta name="keywords" content="php,framework,cradle,response" />
        

        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

        <link rel="icon" type="image/png" href="/favicon.png" />
		<link rel="icon" type="image/gif" href="/favicon.gif" />
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <!-- FACEBOOK TAGS -->
        <meta property="og:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta property="og:title" content="Response - CradlePHP" />

        <meta property="og:description" content="Response Registry Response Methods API (1) ContentTrait (3) HeaderTrait (3) PageTrait (9) RestTrait (15) StatusTrait (2) Registry " />

        <meta property="og:type" content="website" />

        <meta property="og:url" content="https://cradlephp.github.io/" />

        <!-- TWITTER TAGS -->
        <meta name="twitter:card" content="summary" />

        <meta name="twitter:image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <meta name="twitter:title" content="Response - CradlePHP" />

        <meta name="twitter:description" content="Response Registry Response Methods API (1) ContentTrait (3) HeaderTrait (3) PageTrait (9) RestTrait (15) StatusTrait (2) Registry " />

        <meta name="twitter:url" content="https://cradlephp.github.io/" />

        <!-- SCHEMA.ORG TAGS -->
        <meta itemprop="name" content="Cradle PHP" />
        <meta itemprop="openingHours" content="Mo,Tu,We,Th,Fr 10:00-20:00" />

        <link itemprop="url" content="https://cradlephp.github.io/" />
        <link itemprop="logo" content="https://cradlephp.github.io/www/images/logo-long.png" />
        <link itemprop="image" content="https://cradlephp.github.io/www/images/logo-long.png" />

        <link rel="stylesheet" type="text/css" href="/bower_components/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/opensans-webfont-latin/css/opensans-latin.css" />
        <link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/prism.css" />
        <link rel="stylesheet" type="text/css" href="/www/styles/custom.css" />

        <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    </head>

    <body>
    	<header>
            <nav class="navbar navbar-default navbar-branding navbar-static-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Cradle PHP" src="/www/images/logo-long.png" /></a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="header">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/">Home</a></li>
                <li><a href="/docs/install.html">Getting Started</a></li>
                <li><a href="https://github.com/CradlePHP/Cradle"><i class="fa fa-github"></i></a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

        </header>

        <section class="body">
            <div class="container">
                
                 <div class="documentation">
    <div class="row">
        <div class="left col-xs-12 col-md-2">
            <h5>Getting Started</h5>
<ul>
    <li><a href="/docs/install.html">Install</a></li>
    <li><a href="/docs/sink.html">Kitchen Sink</a></li>
</ul>

<h5>Concepts</h5>
<ul>
    <li><a href="/docs/events.html">Events</a></li>
    <li><a href="/docs/flows.html">Flows</a></li>
    <li><a href="/docs/routing.html">Routing</a></li>
    <li><a href="/docs/middleware.html">Middleware</a></li>
    <li><a href="/docs/request.html">Request</a></li>
    <li><a href="/docs/response.html">Response</a></li>
    <li><a href="/docs/integration.html">Integration</a></li>
    <li><a href="/docs/packages.html">Packages</a></li>
</ul>

<h5>Core Traits</h5>
<ul>
    <li><a href="/docs/helper.html">Helper</a></li>
    <li><a href="/docs/data.html">Data</a></li>
    <li><a href="/docs/resolver.html">Resolver</a></li>
    <li><a href="/docs/profiler.html">Profiler</a></li>
</ul>

<!--<h5>Core Packages</h5>
<ul>
    <li><a href="/docs/curl.html">cURL</a></li>
    <li><a href="/docs/handlebars.html">Handlebars</a></li>
    <li><a href="/docs/image.html">Image</a></li>
    <li><a href="/docs/sql.html">SQL</a></li>
</ul>

<h5>Kitchen Sink</h5>
<ul>
    <li><a href="/docs/sink-intro.html">Introduction</a></li>
    <li><a href="/docs/sink-models.html">Models</a></li>
    <li><a href="/docs/sink-jobs.html">Jobs</a></li>
    <li><a href="/docs/sink-controllers.html">Controllers</a></li>
    <li><a href="/docs/sink-templates.html">Templates</a></li>
    <li><a href="/docs/sink-templates.html">Custom CLI Commands</a></li>

    <li><a href="/docs/sink-files.html">File Uploading</a></li>
    <li><a href="/docs/sink-mail.html">Sending Mail</a></li>
    <li><a href="/docs/sink-queue.html">Queuing Jobs</a></li>
    <li><a href="/docs/sink-optimization.html">Optimization</a></li>
    <li><a href="/docs/sink-security.html">Security Cases</a></li>
    <li><a href="/docs/sink-i18n.html">i18n</a></li>
</ul>-->
   
        </div>
        <div class="right col-xs-12 col-md-10">
        	<h1>Response</h1>
<ul>
<li><i class="fa fa-arrow-right"></i><a href="#registry">Registry</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#response">Response Methods</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#api">API (1)</a>
<ul>
<li><i class="fa fa-arrow-right"></i><a href="#content">ContentTrait (3)</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#head">HeaderTrait (3)</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#page">PageTrait (9)</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#rest">RestTrait (15)</a></li>
<li><i class="fa fa-arrow-right"></i><a href="#status">StatusTrait (2)</a></li>
</ul></li>
</ul>
<p><a name="registry"></a></p>
<h2><i class="fa fa-arrow-down"></i> Registry</h2>
<p>A response is a type of registry and a registry is a type of array object
in which, we are dealing with one property which is an array. Every method
in an array object helps interacting with that object like a native array
and with a registry, every method is designed to make it easier to manipulate
the contents of an array. Particularly, a registry contains methods to manage
a multi dimensional array. Since a response contains header, status, content,
etc. a response object deals with these like a registry as well. But at the
end of the day, a registry is a glorified array.</p>
<h6>Remember Routes Uses Responses</h6>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
cradle()-&gt;get('Some Event', function($response, $response) {
    //Do something here
});

</code></pre>
<p>To see what's inside of a response, you can simply echo it out like the
following.</p>
<pre class="code line-numbers language-php"><code class="marked">
echo $response;

</code></pre>
<p>And it will show JSON like the one representing this page.</p>
<pre class="code line-numbers language-php"><code class="marked">{
    "headers": {
        "Content-Type": "text\/html; charset=utf-8"
    },
    "code": 200,
    "header": {
        "Status": "200 OK",
    },
    "body": {
        "error": false,
        "results": {
            "menu": {
                "#registry": "Registry",
                "#methods": "Response Methods",
            }
        }
    }
}
</code></pre>
<p>To access the <code class="language-php">"Registry"</code> in the above JSON, you can do so in two ways</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;get('body', 'results', 'menu', '#registry');

$response-&gt;getDot('body.results.menu.#registry');

</code></pre>
<p>Like wise, setting that same path to <code class="language-php">"Introduction"</code> can be done like this.</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;set('body', 'results', 'menu', '#registry', 'Introduction');

$response-&gt;setDot('body.results.menu.#registry', 'Introduction');

</code></pre>
<p>Removing that path is similar as well.</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;remove('body', 'results', 'menu', '#registry');

$response-&gt;removeDot('body.results.menu.#registry');

</code></pre>
<p>And checking for data can be like this.</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;exists('body', 'results', 'menu', '#registry');

$response-&gt;isDot('body.results.menu.#registry');

</code></pre>
<div class="alert alert-info"><i class="fa fa-info-circle"></i>  If you have an actual `.` in your path, you can change the delimeter like `$response-&gt;getDot('body-results-menu-#registry', '-');`
</div>
<p><a name="methods"></a></p>
<h2><i class="fa fa-arrow-down"></i> Response Methods</h2>
<h3>Content</h3>
<p>Though at the end a response body should be a string, dealing with the body
before that could be an array. This makes a lot of sense if you are building
REST calls for example. So content methods comes in two flavors, when it's
an array or when it's a string. When it's an array, the response object will
be built out like the following.</p>
<pre class="code line-numbers language-php"><code class="marked">&lt;?php
[
    'error' =&gt; false,
    'message' =&gt; 'A message',
    'validation' =&gt; [
        'post_title' =&gt; 'Cannot be empty'
    ]
    'results' =&gt; [
        'post_title' =&gt; 'A Title named Foo Bar'
    ]
]

</code></pre>
<p>And the following methods can help build this structure.</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;isContentFlat(); //is it a string or array?

$response-&gt;addValidation(...$args, $value);

$response-&gt;getResults(...$args);

$response-&gt;setResults(...$args, $value);

$response-&gt;getValidation(...$args);

$response-&gt;setError(true, $message);

</code></pre>
<p>And when you know content is a string, you can use these methods.</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getContent(true); //if the content is an array make it into json

$response-&gt;hasContent();

$response-&gt;setContent($content);

</code></pre>
<p><a name="api"></a></p>
<h2><i class="fa fa-arrow-down"></i> API</h2>
<p><code class="language-php">load</code> - Loads a default response data</p>
<pre class="code line-numbers language-php"><code class="marked">
$request-&gt;load();

</code></pre>
<hr />
<p><a name="content"></a></p>
<h3>ContentTrait</h3>
<p><code class="language-php">getContent</code> - Returns the content body</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getContent();

</code></pre>
<hr />
<p><code class="language-php">hasContent</code> - Returns true if there's content</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasContent();

</code></pre>
<hr />
<p><code class="language-php">setContent</code> - Sets the content</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setContent('foobar');

</code></pre>
<hr />
<p><a name="head"></a></p>
<h3>HeaderTrait</h3>
<p><code class="language-php">addHeader</code> - Adds a header parameter</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;addHeader('Content-Type', 'text/html');

$response-&gt;addHeader('Expect');

</code></pre>
<hr />
<p><code class="language-php">getHeaders</code> - Returns either the header value given the name or the all headers</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getHeaders();
$response-&gt;getHeaders('Content-Type', 'text/html');

</code></pre>
<hr />
<p><code class="language-php">removeHeaders</code> - Removes either the header value given the name or the all headers</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;removeHeaders();
$response-&gt;removeHeaders('Content-Type');

</code></pre>
<hr />
<p><a name="page"></a></p>
<h3>PageTrait</h3>
<p><code class="language-php">addMeta</code> - Adds a page meta item</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;addMeta('description', 'foobar');

</code></pre>
<hr />
<p><code class="language-php">getFlash</code> - Returns flash data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getFlash(); //--&gt; ['message' =&gt; 'foobar', 'type' =&gt; 'success']

</code></pre>
<hr />
<p><code class="language-php">getMeta</code> - Returns page meta data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getMeta('description'); //--&gt; 'foobar'

</code></pre>
<hr />
<p><code class="language-php">getPage</code> - Returns parts of the page data or the entire page data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getPage('meta'); //--&gt; ['description' =&gt; 'foobar']
$response-&gt;getPage('meta', 'description'); //--&gt; 'foobar'
$response-&gt;getPage('title'); //--&gt; 'foobar'
$response-&gt;getPage('flash'); //--&gt; ['message' =&gt; 'foobar', 'type' =&gt; 'success']
$response-&gt;getPage('flash', 'message'); //--&gt; 'foobar'

//...

</code></pre>
<hr />
<p><code class="language-php">hasPage</code> - Returns parts of the page data or the entire page data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasPage();
$response-&gt;hasPage('meta');
$response-&gt;hasPage('meta', 'description');
$response-&gt;hasPage('title');
$response-&gt;hasPage('flash');
$response-&gt;hasPage('flash', 'message');

//...

</code></pre>
<hr />
<p><code class="language-php">removePage</code> - Removes parts of the page data or the entire page data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;removePage();
$response-&gt;removePage('meta');
$response-&gt;removePage('meta', 'description');
$response-&gt;removePage('title');
$response-&gt;removePage('flash');
$response-&gt;removePage('flash', 'message');

//...

</code></pre>
<hr />
<p><code class="language-php">setFlash</code> - Sets a Page flash</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setFlash('Just letting you know');

$response-&gt;setFlash('Something went wrong', 'error');
$response-&gt;setFlash('Just letting you know', 'info');
$response-&gt;setFlash('Something went good', 'success');

</code></pre>
<hr />
<p><code class="language-php">setPage</code> - Sets parts of the page data or the entire page data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setPage([
    'title' =&gt; 'foobar',
    'meta' =&gt; ['description' =&gt; 'foobar'],
    'flash' =&gt; ['message' =&gt; 'Just letting you know', 'type' =&gt; 'info']
]);

$response-&gt;setPage('meta', 'description', 'foobar');
$response-&gt;setPage('title', 'foobar');
$response-&gt;setPage('flash', ['message' =&gt; 'Just letting you know', 'type' =&gt; 'info']);
$response-&gt;setPage('flash', 'message', 'Just letting you know');

//...

</code></pre>
<hr />
<p><code class="language-php">setTitle</code> - Sets the page title</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setTitle('foobar');

//...

</code></pre>
<hr />
<p><a name="rest"></a></p>
<h3>RestTrait</h3>
<p><code class="language-php">addValidation</code> - Adds a JSON validation message or sets all the validations</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;addValidation(['post_title' =&gt; 'Cannot be empty']);
$response-&gt;addValidation('post_title', 'Cannot be empty');

</code></pre>
<hr />
<p><code class="language-php">getResults</code> - Returns parts of the results or the entire JSON result set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getResults();
/*--&gt;
[
    'error' =&gt; false,
    'message' =&gt; 'A message',
    'validation' =&gt; [
        'post_title' =&gt; 'Cannot be empty'
    ]
    'results' =&gt; [
        'post_title' =&gt; 'A Title named Foo Bar'
    ]
]
*/

$response-&gt;getResults('error'); //--&gt; false
$response-&gt;getResults('validation', 'post_title'); //--&gt; 'Cannot be empty'

//...

</code></pre>
<hr />
<p><code class="language-php">getMessage</code> - Returns the message</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getMessage(); //--&gt; 'A message'

</code></pre>
<hr />
<p><code class="language-php">getMessageType</code> - Returns the message type</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getMessageType(); //--&gt; 'error' | 'success' | 'info'

</code></pre>
<hr />
<p><code class="language-php">getValidation</code> - Returns parts of the validation or the entire validation data</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getValidation(); //--&gt; ['post_title' =&gt; 'Cannot be empty']
$response-&gt;getValidation('post_title'); //--&gt; 'Cannot be empty'

</code></pre>
<hr />
<p><code class="language-php">hasJson</code> - Returns true if the given part exists or if there's JSON data at all</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasJson(); //--&gt; true
$response-&gt;hasJson('validation'); //--&gt; true
$response-&gt;hasJson('validation', 'post_title'); //--&gt; true

//...

</code></pre>
<hr />
<p><code class="language-php">hasMessage</code> - Returns true if a message was set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasMessage();

</code></pre>
<hr />
<p><code class="language-php">hasResults</code> - Returns true if the given part exists or if there's JSON results data at all</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasResults();
$response-&gt;hasResults('post_title');

</code></pre>
<hr />
<p><code class="language-php">hasValidation</code> - Returns true if the given part exists or if there's JSON validation data at all</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;hasValidation();
$response-&gt;hasValidation('post_title');

</code></pre>
<hr />
<p><code class="language-php">isError</code> - Returns true if the JSON data is an error set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;isError();

</code></pre>
<hr />
<p><code class="language-php">isSuccess</code> - Returns true if the JSON data is a successful set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;isSuccess();

</code></pre>
<hr />
<p><code class="language-php">removeResults</code> - Removes parts of the results or the entire JSON result set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;removeResults();

$response-&gt;removeResults('error');
$response-&gt;removeResults('validation', 'post_title');

</code></pre>
<hr />
<p><code class="language-php">removeValidation</code> - Removes parts of the validation or the entire JSON validation set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;removeValidation();

$response-&gt;removeValidation('post_title');

</code></pre>
<hr />
<p><code class="language-php">setError</code> - Sets a JSON error message</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setError(true, 'An error message');
$response-&gt;setError(false, 'A success message');

</code></pre>
<hr />
<p><code class="language-php">setResults</code> - Sets parts of the results or the entire JSON result set</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setResults(['post_title' =&gt; 'A Title named Foo Bar']);

$response-&gt;setResults('post_title', 'A Title named Foo Bar');

</code></pre>
<hr />
<p><a name="status"></a></p>
<h3>StatusTrait</h3>
<p><code class="language-php">getStatus</code> - Returns the status code</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;getStatus(); //--&gt; 200

</code></pre>
<hr />
<p><code class="language-php">setStatus</code> - Sets a status code</p>
<pre class="code line-numbers language-php"><code class="marked">
$response-&gt;setStatus(200, '200 OK');

</code></pre>
<hr />
        </div>

    </div>
</div>

            </div>
        </section>
        <footer>
            <div class="container">
	<div class="top clearfix">
        <div class="left pull-left">
            <div>
                <div class="logo pull-left"><img src="/www/images/logo-square.png" /></div>
                <div class="title">Cradle PHP</div>
                <ul>
                    <li><a href="https://github.com/CradlePHP/Cradle">GitHub</a></li>
                    <li><a href="https://packagist.org/packages/cradlephp/cradle">Packagist</a></li>
                </ul>
            </div>
        </div>

        <div class="middle pull-right">
            <ul>
                <li><a href="https://cradlepphp.github.io/docs/intro.html">Getting Started</a></li>
                <li><a href="https://cradlepphp.github.io/docs/install.html">Install</a></li>
                <li><a href="https://cradlepphp.github.io/docs/intro.html">Documentation</a></li>
            </ul>
        </div>


    </div>
    <div class="masthead">
    	<center class="copy">
            <a href="https://travis-ci.org/CradlePHP/framework"><img src="https://travis-ci.org/CradlePHP/framework.svg?branch=master" alt="Travis CI" style="max-width:100%;"></a>
            <a href='https://coveralls.io/github/CradlePHP/framework?branch=master'><img src='https://coveralls.io/repos/github/CradlePHP/framework/badge.svg?branch=master' alt='Coverage Status' /></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img src="https://poser.pugx.org/cradlephp/framework/v/stable" alt="Latest Stable Version"  style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Total Downloads" src="https://poser.pugx.org/cradlephp/framework/downloads" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="Latest Unstable Version" src="https://poser.pugx.org/cradlephp/framework/v/unstable" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/cradlephp/framework"><img alt="License" src="https://poser.pugx.org/cradlephp/framework/license" style="max-width:100%;"></a>
            <br /><br />&copy; CradlePHP 2016
        </center>
    </div>
</div>

        </footer>
        <script type="text/javascript" src="/www/scripts/prism.js"></script>
    </body>
</html>
